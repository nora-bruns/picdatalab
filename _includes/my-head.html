<!-- Add HTML tags here to be included in the head. -->
<!-- Force remove all favicons -->
<style>
  /* Hide favicons using CSS as a backup */
  link[rel*="icon"], link[rel*="shortcut icon"], link[rel*="apple-touch-icon"] {
    display: none !important;
  }
</style>
<script>
  // Run immediately
  (function() {
    var removeIcons = function() {
      // Remove existing links
      var links = document.querySelectorAll('link[rel*="icon"], link[rel*="shortcut icon"], link[rel*="apple-touch-icon"]');
      for (var i = 0; i < links.length; i++) {
        links[i].parentNode.removeChild(links[i]);
      }
      
      // Add empty favicon
      var empty = document.createElement('link');
      empty.rel = 'icon';
      empty.href = 'data:,';
      document.head.appendChild(empty);
    };
    
    // Run now and after DOM loads
    removeIcons();
    document.addEventListener('DOMContentLoaded', removeIcons);
    
    // Also run periodically just to be sure
    setInterval(removeIcons, 1000);
    
    // Override any potential favicon setters
    var originalCreateElement = document.createElement;
    document.createElement = function() {
      var el = originalCreateElement.apply(document, arguments);
      if (arguments[0].toLowerCase() === 'link') {
        el.addEventListener('DOMNodeInsertedIntoDocument', function() {
          if (el.rel && (el.rel.indexOf('icon') > -1)) {
            el.href = 'data:,';
          }
        });
      }
      return el;
    };
  })();
</script>

<!-- Gumroad integration (original content) -->
<link rel="dns-prefetch" href="https://assets.gumroad.com">
<script type="module">
  const loadJS = x => new Promise(r => window.loadJS(x).addEventListener('load', r));
  let p1, p2, io1, io2, embedCreated, overlayCreated;
  document.querySelector('hy-push-state').addEventListener('load', () => {
    io1 ||= new IntersectionObserver(async (entries) => {
      if (entries.some(x => x.isIntersecting)) {
        p1 = p1 || loadJS('https://gumroad.com/js/gumroad-embed.js');
        await p1;
        !embedCreated && await new Promise(function check1(res) {
          if (typeof createGumroadEmbed !== 'undefined')  {
            embedCreated = 1;
            res(createGumroadEmbed());
          }
          else setTimeout(() => check1(res), 200);
        });
        await new Promise(function check2(res) {
          if (typeof GumroadEmbed !== 'undefined') res(GumroadEmbed.reload());
          else setTimeout(() => check2(res), 200);
        });
      }
    }, { rootMargin: '1440px' });
    io2 ||= new IntersectionObserver(async (entries) => {
      if (entries.some(x => x.isIntersecting)) {
        p2 = p2 || loadJS('https://gumroad.com/js/gumroad.js');
        await p2;
        !overlayCreated && await new Promise(function check(res) {
          if (typeof createGumroadOverlay !== 'undefined') {
            overlayCreated = 1;
            res(createGumroadOverlay());
          }
          else setTimeout(() => check(res), 200);
        });
      }
    }, { rootMargin: '300px' });
    document.querySelectorAll('.gumroad-product-embed').forEach(el => io1.observe(el));
    document.querySelectorAll('.gumroad-button').forEach(el => io2.observe(el));
  });
</script>
